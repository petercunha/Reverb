{"version":3,"sources":["node_modules\\web-audio-analyser\\index.js","index.js"],"names":["input","onchange","e","audio","document","getElementById","crossOrigin","src","URL","createObjectURL","files","play","startVisualizer","style","cssText","onend","revokeObjectURL","onclick","analyser","require","canvas","ctx","getContext","width","window","innerWidth","height","innerHeight","update","audioFreq","waveform","fillStyle","globalAlpha","fillRect","scaleFactor","strokeStyle","lineWidth","beginPath","moveTo","i","length","lineTo","stroke","requestAnimationFrame"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAAA,MAAMC,QAAN,GAAiB,UAASC,CAAT,EAAW;AACxB,QAAIC,QAAQC,SAASC,cAAT,CAAwB,OAAxB,CAAZ;AACAF,UAAMG,WAAN,GAAoB,WAApB;AACAH,UAAMI,GAAN,GAAYC,IAAIC,eAAJ,CAAoB,KAAKC,KAAL,CAAW,CAAX,CAApB,CAAZ;AACAP,UAAMQ,IAAN;AACAC;;AAEA;AACAR,aAASC,cAAT,CAAwB,OAAxB,EAAiCQ,KAAjC,CAAuCC,OAAvC,GAAiD,gBAAjD;AACAV,aAASC,cAAT,CAAwB,OAAxB,EAAiCQ,KAAjC,CAAuCC,OAAvC,GAAiD,EAAjD;;AAEAX,UAAMY,KAAN,GAAc,UAASb,CAAT,EAAY;AACtBM,YAAIQ,eAAJ,CAAoB,KAAKT,GAAzB;AACH,KAFD;AAGH,CAdD;;AAgBAH,SAASC,cAAT,CAAwB,iBAAxB,EAA2CY,OAA3C,GAAqD,UAACf,CAAD,EAAO;AACxD,QAAIC,QAAQC,SAASC,cAAT,CAAwB,OAAxB,CAAZ;AACAF,UAAMQ,IAAN;AACAC,oBAAgBT,KAAhB;;AAEA;AACAC,aAASC,cAAT,CAAwB,OAAxB,EAAiCQ,KAAjC,CAAuCC,OAAvC,GAAiD,gBAAjD;AACAV,aAASC,cAAT,CAAwB,OAAxB,EAAiCQ,KAAjC,CAAuCC,OAAvC,GAAiD,EAAjD;;AAEAX,UAAMY,KAAN,GAAc,UAASb,CAAT,EAAY;AACtBM,AD1BR,YC0BYQ,eAAJ,CAAoB,KAAKT,GAAzB;AACH,AD1BL,KCwBI;AAGH,AD1BD,CCcA;ADbA;AC2BA,AD1BA,SC0BSK,eAAT,CAAyBT,KAAzB,EAAgC;AAC5B,AD1BJ,QC0BQe,WAAWC,QAAQ,oBAAR,EAA8BhB,KAA9B,CAAf;AACA,AD1BJ,QC0BQiB,SAAShB,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA,AD1BJ,QC0BQgB,MAAMD,OAAOE,UAAP,CAAkB,IAAlB,CAAV;ADzBJ;AC2BIF,AD1BJ,WC0BWG,KAAP,GAAeC,OAAOC,UAAtB;AACAL,AD1BJ,WC0BWM,MAAP,GAAgBF,OAAOG,WAAvB;ADzBJ;AC2BI,AD1BJ,aC0BaC,MAAT,GAAkB;AACd,AD1BR,YC0BYC,YAAYX,SAASY,QAAT,EAAhB;ADzBR;AC2BQ,AD1BR;AC2BQT,AD1BR,YC0BYU,SAAJ,GAAc,OAAd;AACAV,AD1BR,YC0BYW,WAAJ,GAAkB,GAAlB;AACAX,AD1BR,YC0BYY,QAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmBb,OAAOG,KAA1B,EAAiCH,OAAOM,MAAxC;AACAL,AD1BR,YC0BYW,WAAJ,GAAkB,GAAlB;ADzBR;AC2BQ,AD1BR;AC2BQ,AD1BR,YC0BYE,cAAc,GAAlB;AACAb,AD1BR,YC0BYc,WAAJ,GAAkB,OAAlB;AACAd,AD1BR,YC0BYe,SAAJ,GAAgB,GAAhB;ADzBR;AC2BQ,AD1BR;AC2BQf,AD1BR,YC0BYgB,SAAJ;AACAhB,AD1BR,YC0BYiB,MAAJ,CAAW,CAAX,EAAclB,OAAOM,MAAP,GAAc,CAAd,GAAkBG,UAAU,CAAV,IAAaK,WAA7C;AACA,AD1BR,aC0Ba,IAAIK,IAAI,CAAb,EAAgBA,IAAIV,UAAUW,MAA9B,EAAsCD,GAAtC,EAA2C;AACvClB,AD1BZ,gBC0BgBoB,MAAJ,CAAYrB,OAAOG,KAAP,GAAaM,UAAUW,MAAxB,GAAgCD,CAA3C,EAA8CnB,OAAOM,MAAP,GAAc,CAAd,GAAkBG,UAAUU,CAAV,IAAaL,WAA7E;AACH,AD1BT;AACA;AC2BQb,AD1BR,YC0BYiB,MAAJ,CAAW,CAAX,EAAclB,OAAOM,MAAP,GAAc,CAAd,GAAkBG,UAAU,CAAV,IAAaK,WAA7C;AACA,AD1BR,aC0Ba,IAAIK,KAAI,CAAb,EAAgBA,KAAIV,UAAUW,MAA9B,EAAsCD,IAAtC,EAA2C;AACvClB,AD1BZ,gBC0BgBoB,MAAJ,CAAYrB,OAAOG,KAAP,GAAaM,UAAUW,MAAxB,GAAgCD,EAA3C,EAA8CnB,OAAOM,MAAP,GAAc,CAAd,GAAkBG,UAAUU,EAAV,IAAaL,WAA7E;AACH,AD1BT;AC2BQb,AD1BR,YC0BYqB,MAAJ;ADzBR;AC2BQC,AD1BR,8BC0B8Bf,MAAtB;AACH,AD1BL;AACA;AC2BIA,AD1BJ;AC2BC,AD1BD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reverb.01d5f875.map","sourceRoot":"..","sourcesContent":["var AudioContext = window.AudioContext || window.webkitAudioContext\n\nmodule.exports = WebAudioAnalyser\n\nfunction WebAudioAnalyser(audio, ctx, opts) {\n  if (!(this instanceof WebAudioAnalyser)) return new WebAudioAnalyser(audio, ctx, opts)\n  if (!(ctx instanceof AudioContext)) (opts = ctx), (ctx = null)\n\n  opts = opts || {}\n  this.ctx = ctx = ctx || new AudioContext\n\n  if (!(audio instanceof AudioNode)) {\n    audio = (audio instanceof Audio || audio instanceof HTMLAudioElement)\n      ? ctx.createMediaElementSource(audio)\n      : ctx.createMediaStreamSource(audio)\n  }\n\n  this.analyser = ctx.createAnalyser()\n  this.stereo   = !!opts.stereo\n  this.audible  = opts.audible !== false\n  this.wavedata = null\n  this.freqdata = null\n  this.splitter = null\n  this.merger   = null\n  this.source   = audio\n\n  if (!this.stereo) {\n    this.output = this.source\n    this.source.connect(this.analyser)\n    if (this.audible)\n      this.analyser.connect(ctx.destination)\n  } else {\n    this.analyser = [this.analyser]\n    this.analyser.push(ctx.createAnalyser())\n\n    this.splitter = ctx.createChannelSplitter(2)\n    this.merger   = ctx.createChannelMerger(2)\n    this.output   = this.merger\n\n    this.source.connect(this.splitter)\n\n    for (var i = 0; i < 2; i++) {\n      this.splitter.connect(this.analyser[i], i, 0)\n      this.analyser[i].connect(this.merger, 0, i)\n    }\n\n    if (this.audible)\n      this.merger.connect(ctx.destination)\n  }\n}\n\nWebAudioAnalyser.prototype.waveform = function(output, channel) {\n  if (!output) output = this.wavedata || (\n    this.wavedata = new Uint8Array((this.analyser[0] || this.analyser).frequencyBinCount)\n  )\n\n  var analyser = this.stereo\n    ? this.analyser[channel || 0]\n    : this.analyser\n\n  analyser.getByteTimeDomainData(output)\n\n  return output\n}\n\nWebAudioAnalyser.prototype.frequencies = function(output, channel) {\n  if (!output) output = this.freqdata || (\n    this.freqdata = new Uint8Array((this.analyser[0] || this.analyser).frequencyBinCount)\n  )\n\n  var analyser = this.stereo\n    ? this.analyser[channel || 0]\n    : this.analyser\n\n  analyser.getByteFrequencyData(output)\n\n  return output\n}\n","input.onchange = function(e){\r\n    var audio = document.getElementById('audio')\r\n    audio.crossOrigin = 'Anonymous'\r\n    audio.src = URL.createObjectURL(this.files[0]);\r\n    audio.play()\r\n    startVisualizer()\r\n\r\n    // Hide file upload div. Show visualizer.\r\n    document.getElementById('step1').style.cssText = \"display: none;\"\r\n    document.getElementById('step2').style.cssText = \"\"\r\n    \r\n    audio.onend = function(e) {\r\n        URL.revokeObjectURL(this.src);\r\n    }\r\n}\r\n\r\ndocument.getElementById('playDefaultLink').onclick = (e) => {\r\n    var audio = document.getElementById('audio')\r\n    audio.play()\r\n    startVisualizer(audio)\r\n\r\n    // Hide file upload div. Show visualizer.\r\n    document.getElementById('step1').style.cssText = \"display: none;\"\r\n    document.getElementById('step2').style.cssText = \"\"\r\n    \r\n    audio.onend = function(e) {\r\n        URL.revokeObjectURL(this.src);\r\n    }\r\n}\r\n\r\nfunction startVisualizer(audio) {\r\n    var analyser = require('web-audio-analyser')(audio);\r\n    var canvas = document.getElementById('canvas');\r\n    var ctx = canvas.getContext('2d');\r\n\r\n    canvas.width = window.innerWidth;\r\n    canvas.height = window.innerHeight;\r\n\r\n    function update() {\r\n        var audioFreq = analyser.waveform()\r\n\r\n        // Clear canvas\r\n        ctx.fillStyle=\"black\";\r\n        ctx.globalAlpha = 0.4;\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        ctx.globalAlpha = 1.0\r\n\r\n        // Set line style\r\n        var scaleFactor = 1.5;\r\n        ctx.strokeStyle = \"white\"\r\n        ctx.lineWidth = 1.5;\r\n\r\n        // Draw frequency lines\r\n        ctx.beginPath();\r\n        ctx.moveTo(0, canvas.height/2 - audioFreq[0]*scaleFactor);\r\n        for (let i = 0; i < audioFreq.length; i++) {\r\n            ctx.lineTo((canvas.width/audioFreq.length)*i, canvas.height/2 - audioFreq[i]*scaleFactor);\r\n        }\r\n\r\n        ctx.moveTo(0, canvas.height/2 + audioFreq[0]*scaleFactor);\r\n        for (let i = 0; i < audioFreq.length; i++) {\r\n            ctx.lineTo((canvas.width/audioFreq.length)*i, canvas.height/2 + audioFreq[i]*scaleFactor);\r\n        }\r\n        ctx.stroke();\r\n\r\n        requestAnimationFrame(update);\r\n    }\r\n\r\n    update()\r\n}"]}